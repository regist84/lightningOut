<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Lightning Out</title>
</head>

<body>
<div id='containerForm' style='width: 40%;border: 1px solid black;margin: 0 auto;margin-bottom: 10px;margin-top: 50px'>
<div id='customEditFormLocator'></div>	
</div>
	
<div id='containerButton' style='width: 40%;border: 1px solid black;margin: 0 auto;'>
<div id='buttonAddDocuments'></div>
</div>
	
<script src="https://agenoves-dev-ed.lightning.force.com/lightning/lightning.out.js"></script>

<script>
	  // catch on document...
  document.addEventListener("e.force:showToast", function(event) { // (1)
    alert("ShowToastEvent"); // Hello from H1
  });
$Lightning.use("c:lightningOutApp",    // name of the Lightning app
	function() {                  // Callback once framework and app loaded
	//first component    
	$Lightning.createComponent(
		"c:customEditForm", // top-level component of your app
		{ },                  // attributes to set on the component when created
		"customEditFormLocator",   // the DOM location to insert the component
		function(cmp) {
		    // callback when component is created and active on the page
		}
	    );
	//second component
	$Lightning.createComponent(
		"c:buttonAddDocuments", // top-level component of your app
		{ },                  // attributes to set on the component when created
		"buttonAddDocuments",   // the DOM location to insert the component
		function(cmp) {
		    // callback when component is created and active on the page
		}
	);
    },
    "https://agenoves-dev-ed.lightning.force.com", // endpoint of org as lightningEndPointURI
    getToken().valueOf() // access token as authToken 
);
	 var messageParams={type: event.getParams().type,message: event.getParams().message,         mode:event.getParams().mode}; 
	console.log('messageParams:' + messageParams);
parent.postMessage(messageParams, lexPath);
}
});
});
});    
	
	 

function getToken (){
	var tokenString = window.location.href;
	var prmstr = window.location.search;
	prmstr = prmstr.substr(1, prmstr.length);
	var prmarr = prmstr.split("&");
	var token = 'noToken';
	for ( var i = 0; i < prmarr.length; i++) {
		var tmparr = prmarr[i].split("=");
		if(tmparr[0] == 'access_token'){
			token = tmparr[1];
			break;
		}
	}
	return token;
}

</script>
</body>
</html>
